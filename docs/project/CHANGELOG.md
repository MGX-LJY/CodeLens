# CodeLens 更新日志

## [1.2.0.2] - 2025-09-16

### 功能更新
-更新所有文件都是以config文件为基础
-更新在最后会清理过程文件

## [1.2.0.1] - 2025-09-16

### 文档更新
- 更新修改后的文档

### 功能更新
- log变得更加简洁好读

## [1.2.0.0] - 2025-09-16

### 🚀 新功能
- 更新了创造模式的功能，支持MCP工具

### 修复bug
- 修复sync工具的无法正常识别的功能

## [1.1.4.2] - 2025-09-16

### 文档更新
- 更新了新文档

### 功能合并
- 合并doc_update.py和doc-update_init.py为doc_scan.py
- 添加功能：添加文档更新历史

## [1.1.4.1] - 2025-09-16

### 文档更新
- 删除了不必要的文档

## [1.1.4.0] - 2025-09-16

### 删除功能
- 删除MCP tools的doc_scan.py
- 更新相关文档

## [1.1.3.1] - 2025-09-16

### 修复功能
- 为codelens获取更多的权限

## [1.1.3.0] - 2025-09-16

### 更新文件
- 更新了doc-scan.py实现了精准精确的代码扫描

## [1.1.2.0] - 2025-09-16

### 更新文件
- 更新统一配置文件，方便管理
- 更新扫描文件过大
- 更新限制最多20个文件

## [1.1.1.1] - 2025-09-16

### 更新文件
- 更新功能阈值进行调整
- 更新了部分文档

## [1.1.1.0] - 2025-09-16

### 🚀 文件处理能力增强

#### 核心改进
- **文件处理上限提升**: 从50KB提升至120KB，支持处理更大代码文件
- **智能分片策略优化**: 保持50KB分片阈值，新增120KB文件跳过限制
- **双重阈值设计**: 50KB启动分片处理，120KB完全跳过文件

#### 技术细节
- **配置分离**: task_execute.py中分离`large_file_threshold`(50KB)和`max_file_size`(120KB)
- **向后兼容**: 分片逻辑完全保持不变，仅扩展处理范围
- **性能优化**: 50KB-120KB大文件通过分片处理，避免直接跳过

#### 影响范围
- `file_service.py`: 更新read_file_safe和get_project_files_info的默认上限
- `doc_scan.py`: 提升默认max_file_size配置到120KB  
- `task_execute.py`: 新增max_file_size配置项，区分分片阈值和处理上限
- `test_large_file_handler.py`: 更新测试用例使用新的120KB上限

## [1.1.0.0] - 2025-09-16

### 🔥 大文件智能分片处理系统

#### 新增功能
- **大文件分片**: 智能处理超大代码文件（数千行到数万行）
- **AST语义分片**: 基于语法树的智能分割，保持代码语义完整性
- **Python支持**: 按类→方法→函数层次化处理，支持复杂语法特性
- **自动处理**: TaskExecutor自动检测大文件并执行分片流程

#### 技术特性
- **处理性能**: 82.5KB文件生成350个分片，耗时0.03秒
- **智能降级**: AST解析失败时自动降级到行级分片
- **依赖分析**: 分片间继承、引用、调用关系追踪
- **透明集成**: 用户无感知处理，完全向后兼容

#### 文档更新
- 新增`large_file_handler.py.md`、`test_large_file_handler.py.md`技术文档
- 更新`file_service.py.md`、`task_execute.py.md`集成说明

## [1.0.1.2] - 2025-09-15

### 文件更新
- 更新不需要依赖绝对路径默认当下目录
- 更新update工具，更加准确
- 修复了JSON不兼容过的问题

## [1.0.1.1] - 2025-09-15

### 推送项目
- 推送项目到GitHub
- 更新readme文档

## [1.0.1.0] - 2025-09-15

### 🆕 新增AI辅助工具

#### 新增MCP工具
- **project_overview**: 智能项目文档阅读助手，扫描项目docs文件夹生成AI阅读提示词
- **doc_update_init**: 文件指纹基点初始化工具，为文档更新检测建立基准
- **doc_update**: 基于文件哈希的增量文档更新检测工具

#### 技术特性
- **文件指纹系统**: MD5哈希追踪，支持持续开发的增量检测
- **智能文档扫描**: 自动发现docs/project和docs/architecture文件
- **滚动基点更新**: 每次检测后自动更新指纹基点，避免重复提醒

#### 集成更新
- **MCP工具总数**: 7个 → 10个
- **完整测试验证**: 所有工具通过独立和集成测试
- **热重载支持**: 新工具完全支持开发期间热重载

## [1.0.0.6] - 2025-09-15

### 代码重构
- 将TemplateServiceV05重命名为TemplateService，去除版本号
- 更新所有相关文档中的类名引用

## [1.0.0.5] - 2025-09-15

### 文档更新
-更新了docs全部文件

## [1.0.0.4] - 2025-09-15

### 更新功能
- logging模块更新了1000行自动重置和重启自动重置log的功能

## [1.0.0.3] - 2025-09-15

### 🔥 热重载系统 - 重大功能更新
- 更新热重载系统，修复了所有错误

## [1.0.0.2] - 2025-09-15

### MCP服务器
- MCP服务器现在可以正常启动了，成功挂载到Claude code

## [1.0.0.1] - 2025-09-15

### 模板更新
- 清楚了模板中无用的信息
- 更新最后一步会生成变更日志文档

## [1.0.0.0] - 2025-09-15

### 🚀 正式版本发布 - Init功能完整实现

#### 核心功能
- **init_tools**: 一键项目初始化，自动识别项目规模和复杂度
- **5阶段工作流**: doc_guide → task_init → task_status → task_execute → doc_verify
- **智能任务管理**: 28任务自动执行，100%成功率，完整依赖控制
- **10专业模板**: 架构层6个 + 文件层1个 + 项目层3个

#### 技术成就
- **完整MCP集成**: 7个MCP工具协作，无缝Claude Code集成
- **生产级稳定性**: 450文件项目3小时完整文档生成
- **智能分析**: 自动框架检测、文件优先级、复杂度评估

## [0.6.3.0] - 2025-09-15

### 更新文档
- 更新了所有docs的文档内容，符合最新的模板标准

### 添加功能
- 添加了完成任务MCPtools
- 修复了大量问题
- 添加了自动跳过空白文件的功能

## [0.6.2.0] - 2025-09-15

### 🔄 重大架构变更 - 三层文档架构重构

#### 核心更改
- **架构精简**: 5阶段 → 4阶段工作流程（移除模块层）
- **模板系统**: 16个 → 10个核心模板（移除6个模块层模板）
- **任务类型**: 14种 → 9种（移除所有模块相关任务）
- **文档层级**: 四层 → 三层（Architecture/File/Project）

#### 文件层增强
- **详细流程图**: 新增Mermaid函数调用流程图
- **变量作用域分析**: 深度分析变量使用范围和依赖关系
- **函数依赖关系**: 完整的函数调用依赖映射
- **代码质量评估**: 算法复杂度、性能分析、扩展性评估

#### 破坸性变更
- 完全移除模块层相关功能
- PhaseController: 5阶段 → 4阶段
- 工作流程: Scan → Files → Modules → Architecture → Project 变更为 Scan → Files → Architecture → Project
- 清除所有建议相关的功能文本和代码

## [0.6.1.6] - 2025-09-13

### 更新文件
- 修复了大量的错误
- 第一阶段第二阶段可以正常运行

## [0.6.1.5] - 2025-09-13

### 更新文件
- 更新mcp_server.py适配最新系统

## [0.6.1.4] - 2025-09-13

### 删除文件
- 删除了validation_service.py，被新的task任务系统全面取代了

## [0.6.1.3] - 2025-09-13

### 文件修复
- 修复src/mcp_tools里边所有的报错问题

## [0.6.1.2] - 2025-09-13

### 文档更新
- 清除其余文件的版本号信息

## [0.6.1.1] - 2025-09-13

### 文档更新
- 更新系统架构文档

## [0.6.1.0] - 2025-09-13

### 文档更新
- 新增Task Engine模块完整文档
- 新增4个MCP工具实现文档  
- 更新所有架构和项目文档至v0.6.0.0

## [0.6.0.0] - 2025-09-13

### 🚀 重大更新 - 增强型MCP任务流程系统

#### 新增功能
- **任务引擎模块**: TaskManager、PhaseController、StateTracker
- **4个新MCP工具**: doc_guide（项目分析）、task_init（任务生成）、task_execute（执行管理）、task_status（进度监控）
- **5阶段工作流程**: 扫描 → 文件 → 模块 → 架构 → 项目（严格依赖控制）
- **智能文件过滤**: 项目类型感知，减少无关文件干扰

#### 技术改进
- 100%阶段完成率要求
- 任务依赖图谱管理
- 状态持久化存储
- 日志系统标准化
- 修复所有导入错误

#### 破坏性变更
- MCP工具：3个 → 7个
- 执行模式：手动 → 自动化阶段控制

## [0.5.4.1] - 2025-09-13

### 文档更新
- 更新架构文档data-flow.md,overview.md和tech-stack.md

### 删除文档
- 删除不需要的文档

## [0.5.4.0] - 2025-09-13

### 模板系统优化
- 文件层模板整合：将3个文件层模板整合为1个FILE_SUMMARY_TEMPLATE
- 模板系统从18个精简到16个核心模板：架构层(6个) + 模块层(6个) + 文件层(1个) + 项目层(3个)

### 技术改进
- 更新mcp_server.py到v0.5.4.0，完全适配16个模板系统
- 更新validation_service.py适配16模板验证逻辑
- 新增通用项目文档目录结构生成功能

### 文档更新
- 创建模块连接文档：api-services.md和auth-database.md
- 更新docs/files/summaries/src/templates相关文档

## [0.5.3.2] - 2025-09-13

### MCP服务器更新
- 更新mcp_server.py到v0.5.3.2，完全适配18个核心模板系统

## [0.5.3.1] - 2025-09-13

### 文档同步更新
- 更新docs/files/summaries/src/templates目录下的所有文档文件

## [0.5.3] - 2025-09-13

### 模板精简化
- 删除架构层模板：设计模式模板
- 删除文件层模板：算法分解模板、代码度量模板
- 删除项目层模板：贡献指南、API参考、故障排除、性能报告、版本记录模板
- 模板系统从26个精简到18个核心模板：架构层(6个) + 模块层(6个) + 文件层(3个) + 项目层(3个)

### 技术改进
- 更新TemplateService适配18个模板系统
- 保持向后兼容性，核心功能不变

## [0.5.2] - 2025-09-13

### 文档更新
- 更新docs/files中src/templates所有模板文件的文档
- 完善模板系统相关文件的描述和功能说明
- 统一文件层文档的格式和内容

## [0.5.1] - 2025-09-13

### 改进
- 文档语言优化：移除夸张性描述，使用更准确的技术表述
- 文档结构简化：清理版本号信息，专注核心功能说明
- 用户体验提升：简化文档表述，提高可读性

## [0.5.0] - 2025-09-13

### 🚀 重大更新
- **26个专业模板系统**：从4个基础模板升级到26个企业级专业模板
- **四层文档架构**：Architecture(7) + Module(6) + File(5) + Project(8)
- **TemplateService**：全新的26模板统一管理服务
- **模块化模板组织**：独立Python文件管理，便于维护和扩展

### 新增功能
- 智能模板查询：按层级、类型、名称多维度查询
- 模板统计功能：get_layer_stats()提供各层级模板分布统计
- 增强MCP工具集成：所有工具支持26模板系统和四层架构

### 性能优化
- 模板加载：26个模板，<0.02秒加载完成
- 内存优化：按需加载模板，支持大规模项目
- 并发支持：模板服务支持并发访问

### 破坏性变更
- TemplateService：精简为主要实现类
- 模板类型：从4个扩展到26个专业类型

## [0.4.1] - 2025-09-13

### 修复
- **日志系统集成**：修复MCP工具和服务器缺失的日志记录功能
- **操作日志记录**：为所有MCP工具添加完整的日志支持

## [0.4.0] - 2025-09-13

### 添加
- **完整MCP服务器**：`mcp_server.py` - 生产就绪的MCP协议服务器
- **Claude Code集成**：配置模板和部署指南
- **协作流程测试**：`test_mcp_doc_init.py` - 8步验证工具
- **使用指南**：`CODELENS_MCP_GUIDE.md`

### 性能验证
- 微信自动化项目：118文件/0.07秒，生成7个文档

## [0.3.0] - 2025-09-13

### 添加
- **企业级日志系统**：结构化JSON日志、文件轮转、异步写入
- **服务集成**：所有核心服务集成日志功能
- **操作追踪**：完整的操作耗时和性能监控

### 技术改进
- 零依赖设计，仅使用Python标准库
- 企业级可观测性能力

## [0.2.0] - 2025-09-13

### 添加
- ValidationService文档验证服务
- doc_scan MCP工具（替代doc_init）
- template_get MCP工具
- doc_verify MCP工具
- 增强的FileService（元数据、目录树、统计）
- 模板资源管理功能

### 移除
- AIService和AI生成功能
- ThreeLayerDocGenerator文档生成器
- AI提示词相关功能

### 变更
- 重构为Claude Code协作助手架构
- 从AI文档生成转为信息提供服务
- 标准化JSON响应格式
- 无状态MCP工具设计

## [0.1.0] - 2025-09-12

### 添加
- 三层文档生成系统（文件层 → 模块层 → 架构层）
- Python项目代码扫描和分析
- Mock AI服务用于测试
- MCP doc_init工具
- 命令行接口
- 基本错误处理和文件过滤

### 限制
- 仅支持Python项目
- AI为模拟实现
- 暂无配置文件支持

## [0.0.1] - 2025-09-12

### 添加
- 项目初始化
- 基础文档结构