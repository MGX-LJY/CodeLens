# æ–‡ä»¶åˆ†ææŠ¥å‘Šï¼šsrc/services/file_service.py

## æ–‡ä»¶æ¦‚è¿°
CodeLensæ–‡ä»¶æœåŠ¡çš„æ ¸å¿ƒå®ç°ï¼Œä¸ºClaude Codeæä¾›å®Œæ•´çš„é¡¹ç›®æ–‡ä»¶ä¿¡æ¯ã€å…ƒæ•°æ®æå–å’Œç›®å½•æ ‘ç”ŸæˆåŠŸèƒ½ã€‚**é›†æˆdoc_scanåŠŸèƒ½å’Œå¤§æ–‡ä»¶åˆ†ç‰‡å¤„ç†**ï¼Œæ”¯æŒè¶…å¤§ä»£ç æ–‡ä»¶çš„æ™ºèƒ½å¤„ç†ã€‚è¯¥æœåŠ¡ä½œä¸ºæ–‡ä»¶ç³»ç»Ÿæ“ä½œçš„ä¸“ä¸šå°è£…ï¼Œæ”¯æŒæ™ºèƒ½æ–‡ä»¶æ‰«æã€å®‰å…¨æ–‡ä»¶è¯»å–ã€ç»“æ„åŒ–å…ƒæ•°æ®æå–ï¼Œé›†æˆä¼ä¸šçº§æ—¥å¿—ç³»ç»Ÿå’Œå¤§æ–‡ä»¶åˆ†ç‰‡ç³»ç»Ÿï¼Œç¡®ä¿æ“ä½œçš„å¯è¿½è¸ªæ€§ã€æ€§èƒ½ç›‘æ§å’Œå¤§æ–‡ä»¶å¤„ç†èƒ½åŠ›ã€‚ä½œä¸º3é˜¶æ®µæ–‡æ¡£ç”Ÿæˆæ¶æ„çš„åŸºç¡€æœåŠ¡ï¼Œç›´æ¥æ”¯æŒæ–‡ä»¶å±‚â†’æ¶æ„å±‚â†’é¡¹ç›®å±‚çš„æ–‡æ¡£ç”Ÿæˆæµç¨‹ã€‚

## ä»£ç ç»“æ„åˆ†æ

### å¯¼å…¥ä¾èµ–
- **ç³»ç»Ÿæ¨¡å—**: `os` - æ–‡ä»¶ç³»ç»ŸåŸºç¡€æ“ä½œ
- **æ—¶é—´æ¨¡å—**: `time, datetime` - æ€§èƒ½æµ‹é‡å’Œæ—¶é—´æˆ³å¤„ç†
- **è·¯å¾„æ“ä½œ**: `pathlib.Path` - ç°ä»£Pythonè·¯å¾„æ“ä½œ
- **ç±»å‹æ³¨è§£**: `typing.List, Dict, Optional, Any, Union, Tuple` - å®Œæ•´ç±»å‹æç¤ºæ”¯æŒ
- **æ—¥å¿—ç³»ç»Ÿ**: `..logging.get_logger` - ä¼ä¸šçº§æ—¥å¿—é›†æˆï¼Œå«DummyLoggeré™çº§æœºåˆ¶
- **ğŸ”¥æ–°å¢**: **å¤§æ–‡ä»¶å¤„ç†**: `.large_file_handler.LargeFileHandler, ChunkingResult, CodeChunk` - å¤§æ–‡ä»¶åˆ†ç‰‡å¤„ç†é›†æˆ

### å…¨å±€å˜é‡å’Œå¸¸é‡
- **default_extensions**: ['.py'] - é»˜è®¤æ‰«æçš„æ–‡ä»¶æ‰©å±•å
- **default_excludes**: æ’é™¤ç›®å½•åˆ—è¡¨ï¼ŒåŒ…å«'__pycache__', '.git', 'node_modules'ç­‰
- **DummyLoggerç±»**: æ—¥å¿—ç³»ç»Ÿä¸å¯ç”¨æ—¶çš„é™çº§å¤„ç†ç±»
- **ğŸ”¥æ–°å¢**: **HAS_LARGE_FILE_HANDLER**: å¤§æ–‡ä»¶å¤„ç†å™¨å¯ç”¨æ€§æ ‡å¿—

### é…ç½®å’Œè®¾ç½®
- **æ–‡ä»¶æ‰«æé…ç½®**: æ”¯æŒè‡ªå®šä¹‰æ‰©å±•åå’Œæ’é™¤æ¨¡å¼
- **å®‰å…¨è¯»å–é…ç½®**: é»˜è®¤120KBæ–‡ä»¶å¤„ç†ä¸Šé™ï¼Œ50KBåˆ†ç‰‡é˜ˆå€¼
- **ç›®å½•æ ‘é…ç½®**: é»˜è®¤3å±‚æ·±åº¦é™åˆ¶
- **æ—¥å¿—é›†æˆ**: å®Œæ•´çš„æ“ä½œå¼€å§‹/ç»“æŸæ—¥å¿—è®°å½•
- **ğŸ”¥æ–°å¢**: **å¤§æ–‡ä»¶å¤„ç†é…ç½®**: æ”¯æŒå¯ç”¨/ç¦ç”¨å¤§æ–‡ä»¶åˆ†ç‰‡åŠŸèƒ½

## å‡½æ•°è¯¦ç»†åˆ†æ

### å‡½æ•°æ¦‚è§ˆè¡¨
| å‡½æ•°å | å‚æ•° | è¿”å›å€¼ | åŠŸèƒ½æè¿° |
|--------|------|--------|----------|
| `__init__` | self, enable_large_file_chunking | None | ğŸ”¥æ›´æ–°ï¼šåˆå§‹åŒ–æ–‡ä»¶æœåŠ¡ï¼Œæ”¯æŒå¤§æ–‡ä»¶åˆ†ç‰‡é…ç½® |
| `scan_source_files` | project_path, extensions, exclude_patterns | List[str] | æ™ºèƒ½æ‰«æé¡¹ç›®æºä»£ç æ–‡ä»¶ |
| `read_file_safe` | file_path, max_size | Optional[str] | ğŸ”¥æ›´æ–°ï¼šå®‰å…¨è¯»å–æ–‡ä»¶å†…å®¹ï¼Œæ”¹è¿›æ—¥å¿—è®°å½• |
| `ğŸ”¥æ–°å¢ read_file_with_chunking` | file_path, max_size | Union[str, ChunkingResult, None] | **æ ¸å¿ƒæ–°åŠŸèƒ½**ï¼šæ™ºèƒ½æ–‡ä»¶è¯»å–ï¼Œå¤§æ–‡ä»¶è‡ªåŠ¨åˆ†ç‰‡ |
| `ğŸ”¥æ–°å¢ should_chunk_file` | file_path, max_size | bool | åˆ¤æ–­æ–‡ä»¶æ˜¯å¦éœ€è¦åˆ†ç‰‡å¤„ç† |
| `ğŸ”¥æ–°å¢ get_file_processing_info` | file_path, max_size | Dict[str, Any] | è·å–æ–‡ä»¶å¤„ç†è¯¦ç»†ä¿¡æ¯å’Œå»ºè®® |
| `get_relative_path` | file_path, project_path | str | è·å–ç›¸å¯¹äºé¡¹ç›®æ ¹ç›®å½•çš„è·¯å¾„ |
| `scan_directory_structure` | project_path, max_depth | Dict | æ‰«æç›®å½•ç»“æ„ï¼Œè¿”å›å±‚æ¬¡åŒ–ä¿¡æ¯ |
| `get_project_info` | project_path | Dict | è·å–é¡¹ç›®åŸºç¡€ä¿¡æ¯ï¼ŒåŒ…å«ä¸»æ–‡ä»¶å’Œé…ç½®æ–‡ä»¶ |
| `_should_exclude` | path, exclude_patterns | bool | æ£€æŸ¥è·¯å¾„æ˜¯å¦åº”è¯¥è¢«æ’é™¤ |
| `create_file_summary_path` | file_path, project_path, docs_path | str | åˆ›å»ºæ–‡ä»¶æ‘˜è¦çš„è¾“å‡ºè·¯å¾„ |
| `get_file_metadata` | file_path | Optional[Dict[str, Any]] | è·å–æ–‡ä»¶è¯¦ç»†å…ƒæ•°æ®ä¿¡æ¯ |
| `get_directory_tree` | project_path, max_depth | Dict[str, Any] | è·å–ä¼˜åŒ–çš„ç›®å½•æ ‘ç»“æ„ |
| `get_project_files_info` | project_path, include_content, extensions, exclude_patterns, max_file_size | Dict[str, Any] | æ ¸å¿ƒæ–¹æ³•ï¼šè·å–é¡¹ç›®æ–‡ä»¶å®Œæ•´ç»“æ„åŒ–ä¿¡æ¯ |

### å‡½æ•°è¯¦ç»†è¯´æ˜

**`__init__(self, enable_large_file_chunking: bool = True)` ğŸ”¥æ›´æ–°**
- **æ–°å¢å‚æ•°**: enable_large_file_chunking - æ§åˆ¶å¤§æ–‡ä»¶åˆ†ç‰‡åŠŸèƒ½
- åˆå§‹åŒ–FileServiceå®ä¾‹ï¼Œé›†æˆå¤§æ–‡ä»¶å¤„ç†å™¨
- è®¾ç½®é»˜è®¤æ–‡ä»¶æ‰©å±•åå’Œæ’é™¤æ¨¡å¼
- åˆ›å»ºç»„ä»¶æ—¥å¿—å™¨å®ä¾‹ï¼Œæ”¯æŒæ“ä½œè¿½è¸ª
- **æ™ºèƒ½åˆå§‹åŒ–**: æ ¹æ®ä¾èµ–å¯ç”¨æ€§æ™ºèƒ½å¯ç”¨å¤§æ–‡ä»¶å¤„ç†
- **é™çº§å¤„ç†**: ä¾èµ–ä¸å¯ç”¨æ—¶ä¼˜é›…é™çº§å¹¶è®°å½•è­¦å‘Š

**ğŸ”¥æ–°å¢ `read_file_with_chunking(self, file_path: str, max_size: int = 122880) -> Union[str, ChunkingResult, None]`**
- **æ ¸å¿ƒæ–°åŠŸèƒ½**: æ™ºèƒ½æ–‡ä»¶è¯»å–ï¼Œè‡ªåŠ¨å¤„ç†å¤§æ–‡ä»¶åˆ†ç‰‡
- **æ™ºèƒ½åˆ¤æ–­**: å°æ–‡ä»¶(<50KB)ç›´æ¥è¿”å›ï¼Œ50KB-120KBåˆ†ç‰‡å¤„ç†ï¼Œ>120KBè·³è¿‡
- **é€æ˜å¤„ç†**: å¯¹è°ƒç”¨è€…é€æ˜ï¼Œæ ¹æ®æ–‡ä»¶å¤§å°è‡ªåŠ¨é€‰æ‹©å¤„ç†ç­–ç•¥
- **é”™è¯¯å®‰å…¨**: åˆ†ç‰‡å¤±è´¥æ—¶ä¼˜é›…é™çº§ï¼Œä¸ä¸­æ–­æ­£å¸¸æµç¨‹
- **æ€§èƒ½ç›‘æ§**: è¯¦ç»†çš„å¤„ç†æ—¥å¿—å’Œæ€§èƒ½è®°å½•
- **ç±»å‹å®‰å…¨**: è¿”å›ç±»å‹æ˜ç¡®ï¼Œæ”¯æŒisinstanceåˆ¤æ–­

**ğŸ”¥æ–°å¢ `should_chunk_file(self, file_path: str, max_size: int = 50000) -> bool`** (åˆ†ç‰‡é˜ˆå€¼)
- **å¿«é€Ÿåˆ¤æ–­**: åŸºäºæ–‡ä»¶å¤§å°å’Œå¤„ç†å™¨å¯ç”¨æ€§å¿«é€Ÿåˆ¤æ–­
- **é…ç½®æ„ŸçŸ¥**: è€ƒè™‘å¤§æ–‡ä»¶å¤„ç†åŠŸèƒ½çš„å¯ç”¨çŠ¶æ€
- **é˜ˆå€¼çµæ´»**: æ”¯æŒè‡ªå®šä¹‰å¤§å°é˜ˆå€¼
- **å§”æ‰˜å¤„ç†**: å§”æ‰˜ç»™ä¸“ä¸šçš„LargeFileHandleråˆ¤æ–­é€»è¾‘

**ğŸ”¥æ–°å¢ `get_file_processing_info(self, file_path: str, max_size: int = 50000) -> Dict[str, Any]`** (åˆ†ç‰‡é˜ˆå€¼)
- **è¯¦ç»†åˆ†æ**: æä¾›æ–‡ä»¶çš„å®Œæ•´å¤„ç†ä¿¡æ¯å’Œå»ºè®®
- **è¯­è¨€æ£€æµ‹**: é›†æˆè¯­è¨€æ£€æµ‹å’Œåˆ†ç‰‡å™¨å¯ç”¨æ€§æ£€æŸ¥
- **å¤„ç†å»ºè®®**: æ˜ç¡®çš„å¤„ç†å»ºè®®å’Œèƒ½åŠ›è¯´æ˜
- **é”™è¯¯å¤„ç†**: æ–‡ä»¶ä¸å­˜åœ¨æˆ–è®¿é—®é”™è¯¯çš„è¯¦ç»†å¤„ç†
- **ä¿¡æ¯ä¸°å¯Œ**: æ–‡ä»¶å¤§å°ã€MBè½¬æ¢ã€å¤„ç†èƒ½åŠ›ç­‰å®Œæ•´ä¿¡æ¯

**`read_file_safe(self, file_path: str, max_size: int = 122880) -> Optional[str]` ğŸ”¥æ›´æ–°**
- **æ”¹è¿›æ—¥å¿—**: ä½¿ç”¨self.loggeræ›¿ä»£printï¼Œæé«˜æ—¥å¿—è´¨é‡
- æ£€æŸ¥æ–‡ä»¶å­˜åœ¨æ€§å’Œå¤§å°é™åˆ¶
- ä½¿ç”¨UTF-8ç¼–ç å®‰å…¨è¯»å–æ–‡ä»¶å†…å®¹
- **ä¸“ä¸šæ—¥å¿—**: é”™è¯¯å’Œè­¦å‘Šä¿¡æ¯é€šè¿‡æ—¥å¿—ç³»ç»Ÿè®°å½•
- æä¾›å¼‚å¸¸å®‰å…¨å¤„ç†ï¼Œé¿å…è¯»å–å¤±è´¥ä¸­æ–­ç¨‹åº

**`get_project_files_info(self, project_path, include_content, extensions, exclude_patterns, max_file_size)`**
- æ ¸å¿ƒèšåˆæ–¹æ³•ï¼Œæä¾›å®Œæ•´çš„é¡¹ç›®æ–‡ä»¶ä¿¡æ¯
- é›†æˆé¡¹ç›®ä¿¡æ¯ã€æ–‡ä»¶æ‰«æã€å…ƒæ•°æ®æå–å’Œç›®å½•æ ‘ç”Ÿæˆ
- åŒ…å«è¯¦ç»†çš„ç»Ÿè®¡åˆ†æï¼šæ–‡ä»¶æ•°é‡ã€å¤§å°ã€ç±»å‹åˆ†å¸ƒ
- **å…¼å®¹æ€§**: ä¸æ–°çš„å¤§æ–‡ä»¶å¤„ç†ç³»ç»Ÿå®Œå…¨å…¼å®¹
- å®Œæ•´çš„æ“ä½œæ—¥å¿—è®°å½•ï¼ŒåŒ…å«æ€§èƒ½ç›‘æ§å’Œé”™è¯¯è¿½è¸ª

## ç±»è¯¦ç»†åˆ†æ

### ç±»æ¦‚è§ˆè¡¨
| ç±»å | ç»§æ‰¿å…³ç³» | ä¸»è¦èŒè´£ | å®ä¾‹æ–¹æ³•æ•°é‡ |
|------|----------|----------|--------------|
| `FileService` | æ— ç»§æ‰¿ | æ–‡ä»¶ç³»ç»Ÿæ“ä½œæœåŠ¡ + ğŸ”¥å¤§æ–‡ä»¶å¤„ç†é›†æˆ | 14ä¸ª (æ–°å¢3ä¸ª) |
| `DummyLogger` | æ— ç»§æ‰¿ | æ—¥å¿—ç³»ç»Ÿé™çº§å¤„ç† | 7ä¸ª |

### ç±»è¯¦ç»†è¯´æ˜

**`FileService` ğŸ”¥é‡å¤§æ›´æ–°**
- **è®¾è®¡å‡çº§**: ä»å•çº¯æ–‡ä»¶æœåŠ¡å‡çº§ä¸ºæ™ºèƒ½æ–‡ä»¶å¤„ç†æœåŠ¡
- **æ ¸å¿ƒèŒè´£**: æ–‡ä»¶æ‰«æã€å†…å®¹è¯»å–ã€å…ƒæ•°æ®æå–ã€ç›®å½•ç»“æ„åˆ†æ + **å¤§æ–‡ä»¶æ™ºèƒ½å¤„ç†**
- **æ–°å¢å±æ€§**: 
  - `enable_large_file_chunking` - å¤§æ–‡ä»¶åˆ†ç‰‡åŠŸèƒ½å¼€å…³
  - `large_file_handler` - å¤§æ–‡ä»¶å¤„ç†å™¨å®ä¾‹
- **æ™ºèƒ½å¤„ç†**: æ ¹æ®æ–‡ä»¶å¤§å°è‡ªåŠ¨é€‰æ‹©å¤„ç†ç­–ç•¥
- **å‘åå…¼å®¹**: å®Œå…¨å…¼å®¹ç°æœ‰APIï¼Œæ— ç ´åæ€§å˜æ›´
- **é”™è¯¯å®¹é”™**: å¤§æ–‡ä»¶å¤„ç†å¤±è´¥æ—¶ä¼˜é›…é™çº§åˆ°å¸¸è§„å¤„ç†

**`DummyLogger`**
- **è®¾è®¡ç›®çš„**: æ—¥å¿—ç³»ç»Ÿä¸å¯ç”¨æ—¶çš„é™çº§å¤„ç†
- **æ ¸å¿ƒèŒè´£**: æä¾›ç©ºå®ç°ï¼Œé¿å…æ—¥å¿—è°ƒç”¨å¼‚å¸¸
- **é™çº§ç­–ç•¥**: æ‰€æœ‰æ–¹æ³•è¿”å›ç©ºæˆ–é»˜è®¤å€¼
- **å…¼å®¹æ€§**: ä¸çœŸå®æ—¥å¿—å™¨æ¥å£å®Œå…¨å…¼å®¹

## ğŸ”¥å¤§æ–‡ä»¶å¤„ç†é›†æˆæ¶æ„

### åŒé˜ˆå€¼å¤„ç†ç­–ç•¥ (v1.1.1.0)
- **åˆ†ç‰‡é˜ˆå€¼**: 50KB - è¶…è¿‡æ­¤å¤§å°å¯åŠ¨åˆ†ç‰‡å¤„ç†
- **å¤„ç†ä¸Šé™**: 120KB - è¶…è¿‡æ­¤å¤§å°å®Œå…¨è·³è¿‡æ–‡ä»¶
- **å¤„ç†èŒƒå›´**: 50KB-120KBä¹‹é—´çš„æ–‡ä»¶é€šè¿‡åˆ†ç‰‡ç³»ç»Ÿå¤„ç†
- **å…¼å®¹æ€§**: åˆ†ç‰‡é€»è¾‘ä¿æŒä¸å˜ï¼Œä»…æ‰©å±•å¤„ç†èƒ½åŠ›

### æ¶æ„å›¾

### å¤„ç†æµç¨‹å›¾
```mermaid
graph TD
    A[æ–‡ä»¶è¯»å–è¯·æ±‚] --> B[get_file_processing_info]
    B --> C{æ–‡ä»¶å¤§å°æ£€æŸ¥\n120KBä¸Šé™/50KBåˆ†ç‰‡é˜ˆå€¼}
    C -->|å°äºé˜ˆå€¼| D[read_file_safeå¸¸è§„è¯»å–]
    C -->|å¤§äºé˜ˆå€¼| E{å¤§æ–‡ä»¶å¤„ç†å¯ç”¨?}
    E -->|å¦| F[è®°å½•è­¦å‘Šï¼Œè¿”å›None]
    E -->|æ˜¯| G[read_file_with_chunking]
    
    G --> H[LargeFileHandler.process_large_file]
    H --> I{åˆ†ç‰‡æˆåŠŸ?}
    I -->|æ˜¯| J[è¿”å›ChunkingResult]
    I -->|å¦| K[è®°å½•é”™è¯¯ï¼Œè¿”å›None]
    
    D --> L[è¿”å›æ–‡ä»¶å†…å®¹å­—ç¬¦ä¸²]
    F --> M[è°ƒç”¨è€…å¤„ç†é”™è¯¯]
    J --> N[è°ƒç”¨è€…å¤„ç†åˆ†ç‰‡ç»“æœ]
    K --> M
    L --> O[è°ƒç”¨è€…å¤„ç†å†…å®¹]
```

### æ™ºèƒ½å¤„ç†ç­–ç•¥
```mermaid
graph TD
    A[æ–‡ä»¶å¤„ç†è¯·æ±‚] --> B[æ£€æŸ¥æ–‡ä»¶å¤§å°]
    B --> C{< 50KBåˆ†ç‰‡é˜ˆå€¼?}
    C -->|æ˜¯| D[ç›´æ¥è¯»å–è¿”å›å†…å®¹]
    C -->|å¦| E[æ£€æŸ¥å¤§æ–‡ä»¶å¤„ç†å™¨]
    E --> F{å¤„ç†å™¨å¯ç”¨?}
    F -->|å¦| G[è­¦å‘Šå¹¶è¿”å›None]
    F -->|æ˜¯| H[æ‰§è¡Œæ™ºèƒ½åˆ†ç‰‡]
    
    H --> I[è¯­è¨€æ£€æµ‹]
    I --> J[é€‰æ‹©åˆ†ç‰‡å™¨]
    J --> K[ASTè¯­ä¹‰åˆ†ç‰‡]
    K --> L[ä¾èµ–åˆ†æ]
    L --> M[è¿”å›åˆ†ç‰‡ç»“æœ]
    
    style D fill:#e1f5fe
    style M fill:#f3e5f5
    style G fill:#ffebee
```

## å‡½æ•°è°ƒç”¨æµç¨‹å›¾
```mermaid
graph TD
    A[FileServiceåˆå§‹åŒ–] --> B[è®¾ç½®é»˜è®¤é…ç½®]
    B --> C[åˆ›å»ºæ—¥å¿—å™¨å®ä¾‹]
    C --> D{å¯ç”¨å¤§æ–‡ä»¶å¤„ç†?}
    D -->|æ˜¯| E[åˆå§‹åŒ–LargeFileHandler]
    D -->|å¦| F[è®°å½•è­¦å‘Šä¿¡æ¯]
    
    G[read_file_with_chunkingè°ƒç”¨] --> H[æ£€æŸ¥æ–‡ä»¶å­˜åœ¨æ€§]
    H --> I[è·å–æ–‡ä»¶å¤§å°]
    I --> J{å¤§å° > é˜ˆå€¼?}
    J -->|å¦| K[ç›´æ¥è¯»å–æ–‡ä»¶å†…å®¹]
    J -->|æ˜¯| L{å¤§æ–‡ä»¶å¤„ç†å™¨å¯ç”¨?}
    L -->|å¦| M[è®°å½•è­¦å‘Šè¿”å›None]
    L -->|æ˜¯| N[è°ƒç”¨LargeFileHandler]
    
    N --> O[è¯­è¨€æ£€æµ‹]
    O --> P[æ‰§è¡Œåˆ†ç‰‡å¤„ç†]
    P --> Q[è¿”å›ChunkingResult]
    
    K --> R[è¿”å›æ–‡ä»¶å†…å®¹]
    M --> S[è°ƒç”¨è€…é”™è¯¯å¤„ç†]
    Q --> T[è°ƒç”¨è€…åˆ†ç‰‡å¤„ç†]
```

## å˜é‡ä½œç”¨åŸŸåˆ†æ
- **æ¨¡å—ä½œç”¨åŸŸ**: å¯¼å…¥çš„æ¨¡å—ã€DummyLoggerç±»å®šä¹‰ã€HAS_LARGE_FILE_HANDLERæ ‡å¿—
- **ç±»ä½œç”¨åŸŸ**: FileServiceæ–¹æ³•å®šä¹‰ã€é»˜è®¤é…ç½®å¸¸é‡
- **å®ä¾‹ä½œç”¨åŸŸ**: 
  - åŸæœ‰ï¼šdefault_extensionsã€default_excludesã€loggerå®ä¾‹
  - **æ–°å¢**: enable_large_file_chunkingã€large_file_handlerå®ä¾‹
- **æ–¹æ³•ä½œç”¨åŸŸ**: å„æ–¹æ³•å†…çš„å±€éƒ¨å˜é‡ï¼Œå¦‚æ–‡ä»¶è·¯å¾„ã€ç»Ÿè®¡ä¿¡æ¯ã€åˆ†ç‰‡ç»“æœç­‰

## æ€§èƒ½ä¼˜åŒ–ç‰¹æ€§
- **æ™ºèƒ½è·¯ç”±**: æ ¹æ®æ–‡ä»¶å¤§å°è‡ªåŠ¨é€‰æ‹©æœ€ä¼˜å¤„ç†ç­–ç•¥
- **å†…å­˜æ•ˆç‡**: å¤§æ–‡ä»¶åˆ†ç‰‡å¤„ç†é¿å…å…¨é‡å†…å­˜åŠ è½½
- **ç¼“å­˜å‹å¥½**: åˆ†ç‰‡ç»“æœå¯è¢«ä¸‹æ¸¸ç³»ç»Ÿç¼“å­˜åˆ©ç”¨
- **é”™è¯¯éš”ç¦»**: å¤§æ–‡ä»¶å¤„ç†å¤±è´¥ä¸å½±å“å¸¸è§„æ–‡ä»¶æ“ä½œ
- **æ‡’åŠ è½½**: å¤§æ–‡ä»¶å¤„ç†å™¨ä»…åœ¨éœ€è¦æ—¶åˆå§‹åŒ–

## å‘åå…¼å®¹æ€§
- **APIä¿æŒ**: æ‰€æœ‰åŸæœ‰å…¬å…±æ–¹æ³•ç­¾åä¿æŒä¸å˜
- **è¡Œä¸ºä¸€è‡´**: åŸæœ‰åŠŸèƒ½çš„è¡Œä¸ºå®Œå…¨ä¸€è‡´
- **ä¼˜é›…é™çº§**: å¤§æ–‡ä»¶å¤„ç†ä¸å¯ç”¨æ—¶è‡ªåŠ¨é™çº§
- **é€æ˜é›†æˆ**: ç°æœ‰ä»£ç æ— éœ€ä¿®æ”¹å³å¯ä½¿ç”¨æ–°åŠŸèƒ½
- **é…ç½®å¯é€‰**: å¯é€šè¿‡å‚æ•°å®Œå…¨ç¦ç”¨æ–°åŠŸèƒ½

## é”™è¯¯å¤„ç†å¢å¼º
- **åˆ†å±‚å¤„ç†**: ä¸åŒå±‚æ¬¡çš„é”™è¯¯æœ‰ä¸åŒçš„å¤„ç†ç­–ç•¥
- **æ—¥å¿—å®Œå–„**: æ‰€æœ‰é”™è¯¯å’Œè­¦å‘Šé€šè¿‡æ—¥å¿—ç³»ç»Ÿè®°å½•
- **ä¼˜é›…é™çº§**: å¤§æ–‡ä»¶å¤„ç†å¤±è´¥æ—¶çš„å¤šçº§é™çº§æœºåˆ¶
- **çŠ¶æ€éš”ç¦»**: å¤§æ–‡ä»¶å¤„ç†é”™è¯¯ä¸å½±å“å…¶ä»–åŠŸèƒ½
- **ç”¨æˆ·å‹å¥½**: æ˜ç¡®çš„é”™è¯¯ä¿¡æ¯å’Œå¤„ç†å»ºè®®

## å‡½æ•°ä¾èµ–å…³ç³»
- `__init__` â†’ `get_logger` â†’ `LargeFileHandler` åˆå§‹åŒ–é“¾
- `read_file_with_chunking` â†’ `should_chunk_file` â†’ `large_file_handler.process_large_file` å¤§æ–‡ä»¶å¤„ç†é“¾
- `get_file_processing_info` â†’ `large_file_handler.should_chunk_file` â†’ `large_file_handler.detect_language` ä¿¡æ¯è·å–é“¾
- `get_project_files_info` â†’ `get_project_info` â†’ `scan_source_files` â†’ `get_file_metadata` åŸæœ‰å¤„ç†é“¾
- æ‰€æœ‰æ–¹æ³• â†’ `logger` æ—¥å¿—è®°å½•é“¾
- é”™è¯¯å¤„ç† â†’ `DummyLogger` é™çº§æœºåˆ¶é“¾

## ğŸ”¥æ–°åŠŸèƒ½ä½¿ç”¨ç¤ºä¾‹

### åŸºæœ¬ä½¿ç”¨
```python
# å¯ç”¨å¤§æ–‡ä»¶å¤„ç†ï¼ˆé»˜è®¤ï¼‰
file_service = FileService(enable_large_file_chunking=True)

# æ™ºèƒ½æ–‡ä»¶è¯»å–
result = file_service.read_file_with_chunking("large_file.py")

if isinstance(result, str):
    print("æ™®é€šæ–‡ä»¶å†…å®¹", len(result))
elif isinstance(result, ChunkingResult):
    print(f"å¤§æ–‡ä»¶åˆ†ç‰‡å¤„ç†: {result.total_chunks} ä¸ªåˆ†ç‰‡ (50KB-120KBè‡ªåŠ¨åˆ†ç‰‡)")
else:
    print("æ–‡ä»¶è¯»å–å¤±è´¥")
```

### å¤„ç†ä¿¡æ¯æŸ¥è¯¢
```python
# è·å–æ–‡ä»¶å¤„ç†å»ºè®®
info = file_service.get_file_processing_info("some_file.py")
print(f"éœ€è¦åˆ†ç‰‡: {info['needs_chunking']}")
print(f"æ”¯æŒçš„è¯­è¨€: {info.get('detected_language')}")
print(f"æœ‰å¯ç”¨åˆ†ç‰‡å™¨: {info.get('has_chunker')}")
```

### å…¼å®¹æ€§æ£€æŸ¥
```python
# æ£€æŸ¥å¤§æ–‡ä»¶å¤„ç†èƒ½åŠ›
if file_service.enable_large_file_chunking:
    print("å¤§æ–‡ä»¶å¤„ç†å¯ç”¨")
else:
    print("ä»…æ”¯æŒå¸¸è§„æ–‡ä»¶å¤„ç†")
```